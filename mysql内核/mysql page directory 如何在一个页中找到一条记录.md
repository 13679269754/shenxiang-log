
  
## MySQL Page Directory

它是 InnoDB 存储引擎数据页（Page）结构中的一个重要组成部分，下面为你详细介绍：


在 InnoDB 存储引擎里，数据是按页进行管理和存储的，页是磁盘和内存之间数据交互的基本单位。而页目录（Page Directory）就像是一个小型的索引，存在于每个数据页中，其主要作用是加快在页内查找记录的速度。

  
  

*   **记录分组**：页内的记录会被划分为多个组，每个组里的最后一条记录被称作 “组最大记录”。这些 “组最大记录” 会按照主键值（或者记录的插入顺序，如果没有主键）从小到大排列。
*   **槽（Slot）机制**：页目录里为每个组都设置了一个槽，每个槽会保存对应组最大记录在页内的偏移量。可以把这些槽理解成数组的元素，槽的编号就类似于数组的索引。

当要在页内查找某条记录时，会先使用二分查找算法在页目录的槽中定位，确定目标记录可能所在的组，然后再在该组内进行线性查找，找到目标记录。这种先二分查找后线性查找的方式，能有效减少查找所需的比较次数，提高查找效率。


假设一个数据页里有 20 条记录，这些记录被分成了 4 个组，每个组分别有 5 条记录。页目录中就会有 4 个槽，每个槽指向对应组的最大记录。

如果要查找主键值为 `15` 的记录，会先在页目录的 4 个槽所指向的组最大记录中进行二分查找，确定 `15` 可能所在的组，然后在该组内从组最大记录开始往前依次比较，直至找到主键值为 `15` 的记录或者确定该记录不存在。

  
*   **提升查找效率**：借助页目录，在页内查找记录时可以先利用二分查找快速缩小查找范围，再进行线性查找，大大减少了查找所需的比较次数，从而提高了查找效率。
*   **简化页内管理**：页目录为页内的记录分组提供了一种有效的管理方式，使得数据库能够更高效地组织和维护页内的数据。

  